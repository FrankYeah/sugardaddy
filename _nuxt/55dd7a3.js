(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{1076:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAMAAAApWqozAAAAV1BMVEUAAACNjY2MjIyNjY2MjIyMjIyNjY2Pj4+Pj4+NjY2Li4uOjo6Li4uMjIyNjY2Ojo6Ojo6NjY3///+pqambm5uxsbH39/e/v7+UlJTj4+Pb29u4uLiioqIXG7xpAAAAEXRSTlMA71C/z5BwIBDfgH9AsK9f34KhcvQAAAEpSURBVDjLlZXZjoMwDEWdBUgoSw0N6/z/d04YNFUdhyacp0gcRb66IoYAI4vuKRCFVoU08I1GCfykk5eqtMiwfVStFEZRFXdLgReIMnQf+IUHc5M2d9N2iUnec1ciLYsKTjRmoE63xyzOMm2erMEjkeG21SGj8XKHIa9hGKYlNrVBxjh4XhgiDMiETCIW+XIBChn7IUcStkEjyziO83TI0+6P9HoLpGo3BMwkIeAnayhv5DOVt1BeqUzGmEPZ0TGetDyfaj8Dzv5Ia9T/bbP7d2Soy1J+IqXcq9uIbNlApO/lSLhE2gZokOHWzV38VxqzsHAg8+Qe/lA5rrr3yNx/vjx1yq0BmJ1203Z9a00wKp1YQJTeclU3cIVs6QCKqpF1rLTwnm35Ov4FH3Nk1umEJooAAAAASUVORK5CYII="},1100:function(t,e,o){var content=o(1128);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(44).default)("79ffc098",content,!0,{sourceMap:!1})},1127:function(t,e,o){"use strict";o(1100)},1128:function(t,e,o){var n=o(43)(!1);n.push([t.i,"button[data-v-58154119]{margin:14px 0 60px}.control[data-v-58154119]{margin:30px 0 0 30px;color:#000}.control-box[data-v-58154119]{width:800px;margin:20px}.control-title[data-v-58154119]{font-size:32px;margin:40px 0 10px}.control-sub[data-v-58154119]{margin:20px 0 5px;font-size:20px}.control-input[data-v-58154119]{font-size:24px}.control-textarea[data-v-58154119]{width:calc(100% - 20px);height:200px;margin:0;padding:10px;font-size:24px;border:1px solid #dcdfe6}.control-upload[data-v-58154119]{width:110px;height:132px;display:flex;justify-content:center;align-items:center;background-color:#eee;background-repeat:no-repeat;background-size:cover;background-position-x:center;background-position-y:center;border:3px dashed #cbcbcb;border-radius:8px}.control-upload-add[data-v-58154119]{width:22px;height:22px}",""]),t.exports=n},1175:function(t,e,o){"use strict";o.r(e);var n=o(19),c=(o(30),o(163),o(60),o(67),o(68),o(1087),o(614),o(100),{head:{title:"SugarDaddy"},layout:"default",components:{},props:{},data:function(){return{isShowAddMessage:!1,isShowEditMessage:!1,isShowEditDashboard:!1,currentDate:"",messageTitle:"",messageContent:"",messages:[],dashboards:[],pic0:"",pic1:"",pic2:""}},mounted:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"admin"!=t.userData.member.memMail&&t.$router.push("/"),e.next=3,t.getMessage();case 3:return e.next=5,t.getDashboard();case 5:case"end":return e.stop()}}),e)})))()},destroyed:function(){},computed:{userData:function(){return this.$store.state.auth.user[0]}},methods:{getDate:function(){var t=new Date,e=t.getFullYear(),o=t.getMonth()+1,n=t.getDate();o<10&&(o="0"+o),n<10&&(n="0"+n),this.currentDate=e+"-"+o+"-"+n+" 07:01:23"},getMessage:function(){var t=this;this.$axios.get("/api/bulletin").then((function(e){t.messages=e.data})).catch((function(t){console.log(t)}))},addMessage:function(){var t=this;this.getDate(),this.$axios.post("/api/bulletin",{title:this.messageTitle,content:this.messageContent,postTime:this.currentDate}).then((function(e){t.getMessage(),console.log(e)})).catch((function(t){console.log(t)}))},updataMessage:function(t){var e=this;this.getDate(),this.$axios.put("/api/bulletin",{id:this.messages[t].id.toString(),title:this.messages[t].title,content:this.messages[t].content,postTime:this.currentDate}).then((function(t){e.getMessage(),console.log(t)})).catch((function(t){console.log(t)}))},getDashboard:function(){var t=this;this.$axios.get("/api/dashboard").then((function(e){console.log(e.data),t.dashboards=e.data,t.pic0=t.dashboards[2].content+"?"+5023223123123*Math.random(),t.pic1=t.dashboards[5].content+"?"+5012312312312*Math.random(),t.pic2=t.dashboards[8].content+"?"+50123123123123*Math.random()})).catch((function(t){console.log(t)}))},updataDashboard:function(t){var e=this;this.$axios.put("/api/dashboard",{code:this.dashboards[t].code,content:this.dashboards[t].content,name:this.dashboards[t].name}).then((function(t){e.getDashboard(),console.log(t)})).catch((function(t){console.log(t)}))},onUploadChange0:function(t){this.Upload(t,0)},onUploadChange1:function(t){this.Upload(t,1)},onUploadChange2:function(t){this.Upload(t,2)},Upload:function(t,e){var o=this,n="image/jpeg"===t.raw.type||"image/png"===t.raw.type,c=t.size/1024/1024<1;if(!n)return this.$message.error("只能上传jpg/png图片!"),!1;if(!c)return this.$message.error("上传文件大小不能超过 1MB!"),!1;0==e?this.pic0=URL.createObjectURL(t.raw):1==e?this.pic1=URL.createObjectURL(t.raw):2==e&&(this.pic2=URL.createObjectURL(t.raw));var r=new FileReader;r.readAsDataURL(t.raw),r.onload=function(t){console.log(t),0==e?o.dashboards[2].content=t.target.result:1==e?o.dashboards[5].content=t.target.result:2==e&&(o.dashboards[8].content=t.target.result)}}},watch:{}}),r=(o(1127),o(49)),component=Object(r.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"control"},[n("el-switch",{attrs:{"active-text":"新增站內訊息","active-color":"#13ce66","inactive-color":"grey"},model:{value:t.isShowAddMessage,callback:function(e){t.isShowAddMessage=e},expression:"isShowAddMessage"}}),t._v(" "),n("el-switch",{attrs:{"active-text":"編輯站內訊息","active-color":"#13ce66","inactive-color":"grey"},model:{value:t.isShowEditMessage,callback:function(e){t.isShowEditMessage=e},expression:"isShowEditMessage"}}),t._v(" "),n("el-switch",{attrs:{"active-text":"更新 Dashboard","active-color":"#13ce66","inactive-color":"grey"},model:{value:t.isShowEditDashboard,callback:function(e){t.isShowEditDashboard=e},expression:"isShowEditDashboard"}}),t._v(" "),t.isShowAddMessage?n("div",{staticClass:"control-box"},[n("div",{staticClass:"control-title"},[t._v("新增站內訊息")]),t._v(" "),n("div",{staticClass:"control-list"},[n("div",[n("div",{staticClass:"control-sub"},[t._v("標題：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:t.messageTitle,callback:function(e){t.messageTitle=e},expression:"messageTitle"}})],1),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("內文：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.messageContent,expression:"messageContent"}],staticClass:"control-textarea",domProps:{value:t.messageContent},on:{input:function(e){e.target.composing||(t.messageContent=e.target.value)}}})]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.addMessage()}}},[t._v("新增站內訊息")])],1)]):t._e(),t._v(" "),t.isShowEditMessage?n("div",{staticClass:"control-box"},[n("div",{staticClass:"control-title"},[t._v("編輯站內訊息")]),t._v(" "),t._l(t.messages,(function(e,o){return n("div",{key:o,staticClass:"control-list"},[n("div",{staticClass:"control-title"},[t._v("公告"+t._s(o+1))]),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("標題：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:e.title,callback:function(o){t.$set(e,"title",o)},expression:"message.title"}})],1),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("內文：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"message.content"}],staticClass:"control-textarea",domProps:{value:e.content},on:{input:function(o){o.target.composing||t.$set(e,"content",o.target.value)}}})]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataMessage(o)}}},[t._v("更新站內訊息")])],1)}))],2):t._e(),t._v(" "),t.isShowEditDashboard?n("div",{staticClass:"control-box"},[n("div",{staticClass:"control-title"},[t._v("更新 Dashboard")]),t._v(" "),n("div",{staticClass:"control-list"},[n("div",[n("div",{staticClass:"control-sub"},[t._v("大標題：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:t.dashboards[0].content,callback:function(e){t.$set(t.dashboards[0],"content",e)},expression:"dashboards[0].content"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(0)}}},[t._v("更新大標題")])],1),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("大副標題：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:t.dashboards[1].content,callback:function(e){t.$set(t.dashboards[1],"content",e)},expression:"dashboards[1].content"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(1)}}},[t._v("更新大標題")])],1),t._v(" "),n("el-upload",{attrs:{action:"",accept:"image/jpeg,image/png,image/jpg","on-change":t.onUploadChange0,"auto-upload":!1,"show-file-list":!1}},[n("div",{staticClass:"control-upload",style:[{backgroundImage:"url("+t.pic0+")"}]},[n("img",{staticClass:"control-upload-add",attrs:{src:o(1076),alt:"add"}})])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(2)}}},[t._v("更新大標題圖片")]),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("小標題1：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:t.dashboards[3].content,callback:function(e){t.$set(t.dashboards[3],"content",e)},expression:"dashboards[3].content"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(3)}}},[t._v("更新小標題1")])],1),t._v(" "),n("el-upload",{attrs:{action:"",accept:"image/jpeg,image/png,image/jpg","on-change":t.onUploadChange1,"auto-upload":!1,"show-file-list":!1}},[n("div",{staticClass:"control-upload",style:[{backgroundImage:"url("+t.pic1+")"}]},[n("img",{staticClass:"control-upload-add",attrs:{src:o(1076),alt:"add"}})])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(5)}}},[t._v("更新小標題1圖片")]),t._v(" "),n("div",[n("div",{staticClass:"control-sub"},[t._v("小標題2：")]),t._v(" "),n("el-input",{staticClass:"control-input",model:{value:t.dashboards[6].content,callback:function(e){t.$set(t.dashboards[6],"content",e)},expression:"dashboards[6].content"}}),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(6)}}},[t._v("更新小標題2")])],1),t._v(" "),n("el-upload",{attrs:{action:"",accept:"image/jpeg,image/png,image/jpg","on-change":t.onUploadChange2,"auto-upload":!1,"show-file-list":!1}},[n("div",{staticClass:"control-upload",style:[{backgroundImage:"url("+t.pic2+")"}]},[n("img",{staticClass:"control-upload-add",attrs:{src:o(1076),alt:"add"}})])]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updataDashboard(8)}}},[t._v("更新小標題2圖片")])],1)]):t._e(),t._v(" "),n("div",{staticClass:"control-"})],1)}),[],!1,null,"58154119",null);e.default=component.exports}}]);